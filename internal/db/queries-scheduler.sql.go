// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.25.0
// source: queries-scheduler.sql

package db

import (
	"context"
	"database/sql"
)

const getSchedulerState = `-- name: GetSchedulerState :one
SELECT task_name, last_run_at, metadata
FROM scheduler_state
WHERE task_name = ?
`

func (q *Queries) GetSchedulerState(ctx context.Context, taskName string) (*SchedulerState, error) {
	row := q.db.QueryRowContext(ctx, getSchedulerState, taskName)
	var i SchedulerState
	err := row.Scan(&i.TaskName, &i.LastRunAt, &i.Metadata)
	return &i, err
}

const upsertSchedulerState = `-- name: UpsertSchedulerState :exec
INSERT INTO scheduler_state (task_name, last_run_at, metadata)
VALUES (?, ?, ?)
ON DUPLICATE KEY UPDATE
    last_run_at = VALUES(last_run_at),
    metadata = VALUES(metadata)
`

type UpsertSchedulerStateParams struct {
	TaskName  string
	LastRunAt sql.NullTime
	Metadata  sql.NullString
}

func (q *Queries) UpsertSchedulerState(ctx context.Context, arg UpsertSchedulerStateParams) error {
	_, err := q.db.ExecContext(ctx, upsertSchedulerState, arg.TaskName, arg.LastRunAt, arg.Metadata)
	return err
}
