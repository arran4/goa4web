# Query Naming Specification

This document defines the naming conventions for SQL queries and the corresponding
Go wrappers generated by `sqlc`.

## Role prefixes

All query names must begin with a prefix indicating the required role:

- `System` – internal operations run without a user context. These
  queries are suitable for CLI commands and must never require a user ID.
- `Admin` – administrative operations; must not require a user ID.
- `List`/`Get` – user facing operations. User commands include the
  required role using a `For<Role>` suffix (for example `ForLister`,
  `ForWriter`, `ForCommenter`, `ForReplier`). Parameter names should
  mirror the role and use the `<Role>ID` form (e.g. `ListerID`,
  `WriterID`). When a clearer role name exists (`Writer`, `Lister`,
  `Commenter`, `Replier`, etc.) it should be used. Historic `See`/`Seer`
  terminology is replaced by `List`/`Lister`.

## Lists

Queries returning multiple rows must start with the `List` prefix and
include pagination (`LIMIT`/`OFFSET`). All lists **must** paginate and
adhere to the caller's pagination settings. User-facing lists must also
respect the user's language preferences and enforce permissions within
the SQL itself. Admin and system lists are privileged operations and must
not require a user ID.

## Grants

User queries should check grants both in SQL and in Go code to ensure
authorisation rules are enforced. Admin and system queries should not
require a user ID and are intended for privileged operations.

When a query operates on behalf of a user the required role must appear
in the function name as `For<Role>` (for example `CreateImagePostForPoster`).
Corresponding parameter names should use the same role (such as
`PosterID`). Admin and system commands must be clearly labelled with
their respective prefixes and must not accept a user ID. Commands used by
CLI tools are considered system operations.

These rules are verified by tests and should be followed for all new
queries.
